<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Â§ßË©±È™∞ÔΩúPremium 3D</title>
  <style>
    :root{
      --bg-dark:#0a0f1a;
      --bg-table:#0d2818;
      --table-gradient:radial-gradient(ellipse at center, #1a4d2e 0%, #0d2818 70%);
      --text:#e8f5e9;
      --text-muted:#a5d6a7;
      --accent:#4caf50;
      --accent-glow:#81c784;
      --die-size:clamp(50px, 18vw, 80px);
      --die-gap:clamp(8px, 3vw, 16px);
    }

    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    body{
      margin:0;
      min-height:100dvh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      padding:12px;
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","PingFang TC","Noto Sans TC",sans-serif;
      background: var(--bg-dark);
    }

    .table-surface{
      position:fixed; inset:0;
      background: var(--table-gradient);
      box-shadow: inset 0 0 120px rgba(0,0,0,0.7);
      z-index:-1;
    }

    .app{
      width:min(100%,420px);
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .header{
      text-align:center;
      padding:8px 0;
    }
    .header h1{
      margin:0;
      font-size:clamp(28px, 10vw, 42px);
      background:linear-gradient(135deg, #fff 0%, #a5d6a7 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
      letter-spacing:2px;
      text-shadow:0 2px 10px rgba(76,175,80,0.3);
    }
    .brand{
      color:var(--text-muted);
      font-size:clamp(12px, 4vw, 15px);
      margin-top:6px;
      letter-spacing:1px;
      font-weight:500;
    }

    .stats-bar{
      display:flex;
      justify-content:center;
      gap:12px;
      margin:6px 0;
    }
    .stat-pill{
      background:rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.15);
      border-radius:999px;
      padding:8px 16px;
      font-size:clamp(14px, 4.5vw, 17px);
      font-weight:700;
      color:var(--accent-glow);
      backdrop-filter:blur(8px);
    }

    .dice-stage{
      background:rgba(0,0,0,0.25);
      border:1px solid rgba(255,255,255,0.1);
      border-radius:24px;
      padding:20px;
      box-shadow:
        inset 0 2px 8px rgba(0,0,0,0.3),
        0 8px 32px rgba(0,0,0,0.4);
      backdrop-filter:blur(10px);
    }

    .dice-container{
      display:grid;
      grid-template-columns:repeat(5,1fr);
      gap:var(--die-gap);
      justify-items:center;
      perspective:1000px;
    }

    .die{
      width:var(--die-size);
      height:var(--die-size);
      position:relative;
      transform-style:preserve-3d;
      transform: rotateX(-30deg) rotateY(-45deg);
      transition:transform 0.8s cubic-bezier(.2,.8,.2,1);
      cursor:pointer;
      filter:drop-shadow(0 10px 20px rgba(0,0,0,0.5));
    }

    .die.rolling{
      animation:dice-roll 0.85s ease-out;
    }

    @keyframes dice-roll{
      0%{transform:rotateX(0) rotateY(0) scale(1.1)}
      30%{transform:rotateX(180deg) rotateY(90deg) scale(0.95)}
      60%{transform:rotateX(360deg) rotateY(270deg) scale(1.05)}
      100%{transform:var(--final-rot) scale(1)}
    }

    .die-face{
      position:absolute;
      width:100%;
      height:100%;
      background:linear-gradient(145deg, #ffffff 0%, #f5f5f5 50%, #e0e0e0 100%);
      border:1px solid #bbb;
      border-radius:14% / 12%;
      box-shadow: inset 0 0 12px rgba(0,0,0,0.1);
      display:grid;
      padding:12%;
      grid-template:repeat(3,1fr)/repeat(3,1fr);
      gap:4%;
      backface-visibility:hidden;
    }

    .die-face.front{transform:translateZ(calc(var(--die-size)/2))}
    .die-face.back{transform:rotateY(180deg) translateZ(calc(var(--die-size)/2))}
    .die-face.right{transform:rotateY(90deg) translateZ(calc(var(--die-size)/2))}
    .die-face.left{transform:rotateY(-90deg) translateZ(calc(var(--die-size)/2))}
    .die-face.top{transform:rotateX(90deg) translateZ(calc(var(--die-size)/2))}
    .die-face.bottom{transform:rotateX(-90deg) translateZ(calc(var(--die-size)/2))}

    .pip{
      width:100%;
      height:100%;
      border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #1a1a1a 0%, #000 100%);
      box-shadow: inset 0 1px 2px rgba(255,255,255,0.1);
      place-self:center;
    }

    .pip.half{
      background:radial-gradient(circle at 30% 30%, #444 0%, #222 100%);
      box-shadow: inset 0 1px 2px rgba(255,255,255,0.05);
    }

    /* Pip positions for each face */
    .face-1 .pip:nth-child(1){ grid-area:2/2; }
    .face-2 .pip:nth-child(1){ grid-area:1/1; }
    .face-2 .pip:nth-child(2){ grid-area:3/3; }
    .face-3 .pip:nth-child(1){ grid-area:1/1; }
    .face-3 .pip:nth-child(2){ grid-area:2/2; }
    .face-3 .pip:nth-child(3){ grid-area:3/3; }
    .face-4 .pip:nth-child(1){ grid-area:1/1; }
    .face-4 .pip:nth-child(2){ grid-area:1/3; }
    .face-4 .pip:nth-child(3){ grid-area:3/1; }
    .face-4 .pip:nth-child(4){ grid-area:3/3; }
    .face-5 .pip:nth-child(1){ grid-area:1/1; }
    .face-5 .pip:nth-child(2){ grid-area:1/3; }
    .face-5 .pip:nth-child(3){ grid-area:2/2; }
    .face-5 .pip:nth-child(4){ grid-area:3/1; }
    .face-5 .pip:nth-child(5){ grid-area:3/3; }
    .face-6 .pip:nth-child(1){ grid-area:1/1; }
    .face-6 .pip:nth-child(2){ grid-area:1/3; }
    .face-6 .pip:nth-child(3){ grid-area:2/1; }
    .face-6 .pip:nth-child(4){ grid-area:2/3; }
    .face-6 .pip:nth-child(5){ grid-area:3/1; }
    .face-6 .pip:nth-child(6){ grid-area:3/3; }

    .controls{
      display:flex;
      flex-direction:column;
      gap:12px;
      margin-top:6px;
    }

    .btn-roll{
      border:none;
      border-radius:16px;
      padding:16px 24px;
      font-size:clamp(18px, 6vw, 28px);
      font-weight:900;
      letter-spacing:3px;
      color:#0a2e0a;
      background:linear-gradient(180deg, #66bb6a 0%, #43a047 50%, #388e3c 100%);
      box-shadow:
        0 10px 24px rgba(76,175,80,0.5),
        inset 0 1px 0 rgba(255,255,255,0.4);
      cursor:pointer;
      transition:all 0.15s ease;
      text-shadow:0 1px 2px rgba(255,255,255,0.3);
      position:relative;
      overflow:hidden;
    }

    .btn-roll:active{
      transform:translateY(2px) scale(0.98);
      box-shadow:
        0 4px 12px rgba(76,175,80,0.4),
        inset 0 1px 0 rgba(255,255,255,0.2);
    }

    .btn-roll::after{
      content:'';
      position:absolute;
      top:0; left:0; right:0; bottom:0;
      background:linear-gradient(180deg, rgba(255,255,255,0.2) 0%, transparent 50%);
      pointer-events:none;
    }

    .sound-toggle{
      align-self:center;
      background:rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.15);
      color:var(--text-muted);
      padding:10px 18px;
      border-radius:999px;
      font-size:clamp(12px, 4vw, 15px);
      cursor:pointer;
      transition:all 0.2s;
    }
    .sound-toggle:active{ transform:scale(0.96); }
    .sound-toggle.off{ opacity:0.5; }

    .result-panel{
      background:rgba(0,0,0,0.3);
      border:1px solid rgba(255,255,255,0.12);
      border-radius:16px;
      padding:16px;
      text-align:center;
      backdrop-filter:blur(12px);
    }

    .result-label{
      color:var(--text-muted);
      font-size:clamp(12px, 4vw, 14px);
      margin-bottom:8px;
      letter-spacing:1px;
    }

    .dice-values{
      font-size:clamp(18px, 6vw, 26px);
      font-weight:800;
      letter-spacing:4px;
      color:var(--accent-glow);
      text-shadow:0 0 12px rgba(129,199,132,0.4);
      margin-bottom:10px;
      font-variant-numeric: tabular-nums;
    }

    .total-score{
      font-size:clamp(22px, 7vw, 32px);
      font-weight:900;
      color:#fff;
      text-shadow:0 2px 8px rgba(0,0,0,0.5);
    }

    .tip{
      margin-top:12px;
      color:rgba(255,255,255,0.5);
      font-size:clamp(11px, 3.5vw, 13px);
      line-height:1.4;
    }

    .footer{
      margin-top:12px;
      text-align:center;
      color:rgba(255,255,255,0.25);
      font-size:clamp(10px, 3vw, 12px);
      letter-spacing:0.5px;
    }
  </style>
</head>
<body>
  <div class="table-surface"></div>

  <main class="app">
    <header class="header">
      <h1>üé≤ Â§ßË©±È™∞</h1>
      <div class="brand">PREMIUM 3D ¬∑ CASINO STYLE</div>
    </header>

    <div class="stats-bar">
      <div class="stat-pill">Á∏ΩÈªûÊï∏Ôºö<span id="sum">0</span></div>
    </div>

    <section class="dice-stage">
      <div class="dice-container" id="diceContainer"></div>
    </section>

    <div class="controls">
      <button class="btn-roll" id="rollBtn">Êì≤È™∞</button>
      <button class="sound-toggle" id="soundBtn">üîä Èü≥Êïà</button>
    </div>

    <section class="result-panel">
      <div class="result-label">ÁµêÊûú</div>
      <div class="dice-values" id="diceValues">- - - - -</div>
      <div class="total-score" id="totalScore">0</div>
      <div class="tip">ÊèêÁ§∫ÔºöÂèØËº™ÊµÅÊì≤ÔºåÊñπ‰æøÊúãÂèãËÅöÊúÉÁé©Â§ßË©±È™∞</div>
    </section>

    <div class="footer">LIAR'S DICE ¬∑ PREMIUM 3D MOBILE</div>
  </main>

  <script>
    const container = document.getElementById('diceContainer');
    const diceValues = document.getElementById('diceValues');
    const totalScore = document.getElementById('totalScore');
    const sumEl = document.getElementById('sum');
    const rollBtn = document.getElementById('rollBtn');
    const soundBtn = document.getElementById('soundBtn');

    let soundOn = true;
    let audioCtx = null;

    // Dice face pip layouts (3x3 grid positions)
    const pipLayouts = {
      1: [[2,2]],
      2: [[1,1],[3,3]],
      3: [[1,1],[2,2],[3,3]],
      4: [[1,1],[1,3],[3,1],[3,3]],
      5: [[1,1],[1,3],[2,2],[3,1],[3,3]],
      6: [[1,1],[1,3],[2,1],[2,3],[3,1],[3,3]]
    };

    // Create a 3D die element
    function createDie() {
      const die = document.createElement('div');
      die.className = 'die';
      die.dataset.value = '1';
      die.style.setProperty('--final-rot', 'rotateX(0deg) rotateY(0deg)');

      // Create 6 faces
      const faces = ['front','back','right','left','top','bottom'];
      faces.forEach(face => {
        const f = document.createElement('div');
        f.className = `die-face ${face}`;
        f.dataset.face = face;
        die.appendChild(f);
      });

      container.appendChild(die);
      updateDieFace(die, 1);
      return die;
    }

    // Update pip display on all faces
    function updateDieFace(die, value) {
      die.dataset.value = value;
      const pipPositions = pipLayouts[value];
      const faceEls = die.querySelectorAll('.die-face');

      faceEls.forEach(face => {
        const f = face.dataset.face;
        let pips = [];

        // Determine which pips appear on this face based on standard die opposite faces sum to 7
        // Standard die: 1 opposite 6, 2 opposite 5, 3 opposite 4
        let displayValue = value;
        if (f === 'back') displayValue = 7 - value;
        else if (f === 'right') displayValue = {1:2,2:3,3:1,4:6,5:1,6:2}[value] || value;
        else if (f === 'left') displayValue = {1:2,2:3,3:1,4:6,5:1,6:2}[value] || value;
        else if (f === 'top') displayValue = {1:2,2:1,3:3,4:4,5:5,6:6}[value] || value;
        else if (f === 'bottom') displayValue = {1:2,2:1,3:3,4:4,5:5,6:6}[value] || value;

        const layout = pipLayouts[displayValue];
        f.innerHTML = '';
        layout.forEach(([r,c], i) => {
          const pip = document.createElement('span');
          pip.className = 'pip';
          if (displayValue === 6 && i < 2) pip.classList.add('half'); // subtle variation for realism
          pip.style.gridRow = r;
          pip.style.gridColumn = c;
          f.appendChild(pip);
        });
      });

      return die;
    }

    // Generate random dice roll values
    function rollDice() {
      const results = [];
      for (let i = 1; i <= 5; i++) {
        results.push(Math.floor(Math.random() * 6) + 1);
      }
      return results;
    }

    // Calculate rotation for a given face
    function getRotationForFace(value) {
      // Pre-defined rotations for each face (front = 1)
      const rotations = {
        1: 'rotateX(-30deg) rotateY(-45deg)',
        2: 'rotateX(-30deg) rotateY(45deg)',
        3: 'rotateX(-30deg) rotateY(135deg)',
        4: 'rotateX(-30deg) rotateY(-135deg)',
        5: 'rotateX(120deg) rotateY(-45deg)',
        6: 'rotateX(120deg) rotateY(45deg)'
      };
      return rotations[value] || rotations[1];
    }

    // Play roll sound
    function playRollSound() {
      if (!soundOn || !audioCtx) return;
      const now = audioCtx.currentTime;
      const freqs = [260, 340, 290, 410];
      freqs.forEach((f,i) => {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = 'triangle';
        osc.frequency.setValueAtTime(f, now + i*0.04);
        gain.gain.setValueAtTime(0.0001, now + i*0.04);
        gain.gain.exponentialRampToValueAtTime(0.025, now + i*0.04 + 0.015);
        gain.gain.exponentialRampToValueAtTime(0.0001, now + i*0.04 + 0.12);
        osc.connect(gain).connect(audioCtx.destination);
        osc.start(now + i*0.04);
        osc.stop(now + i*0.04 + 0.13);
      });
    }

    // Main roll function
    function roll() {
      playRollSound();

      const dice = container.querySelectorAll('.die');
      const values = rollDice();

      dice.forEach((die, i) => {
        const val = values[i];
        die.classList.add('rolling');
        die.style.setProperty('--final-rot', getRotationForFace(val));

        setTimeout(() => {
          updateDieFace(die, val);
          die.classList.remove('rolling');
        }, 850);
      });

      // Update scoredisplay after animation
      setTimeout(() => {
        const sum = values.reduce((a,b)=>a+b,0);
        diceValues.textContent = values.join('„Éª');
        totalScore.textContent = sum;
        sumEl.textContent = sum;
      }, 900);
    }

    // Initialize dice
    function init() {
      for (let i = 0; i < 5; i++) {
        createDie();
      }
      // Initial roll
      setTimeout(roll, 300);
    }

    // Audio context init
    function ensureAudio() {
      if (!audioCtx) {
        const AC = window.AudioContext || window.webkitAudioContext;
        if (AC) audioCtx = new AC();
      }
      if (audioCtx && audioCtx.state === 'suspended') audioCtx.resume();
    }

    // Event listeners
    rollBtn.addEventListener('click', () => {
      ensureAudio();
      roll();
    });

    soundBtn.addEventListener('click', () => {
      ensureAudio();
      soundOn = !soundOn;
      soundBtn.classList.toggle('off', !soundOn);
      soundBtn.textContent = soundOn ? 'üîä Èü≥Êïà' : 'üîá ÈùúÈü≥';
    });

    // Start
    init();
  </script>
</body>
</html>
